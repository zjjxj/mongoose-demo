<!--任务描述

如示例图中所示，基于上一个任务（任务29），在页面中添加多个表单
要求:
表单获得焦点时，下方显示表单填写规则
表单失去焦点时校验表单内容
校验结果正确时，表单边框显示绿色，并在下方显示验证通过的描述文字
校验结果错误时，表单边框显示红色，并在下方显示验证错误的描述文字
点击提交按钮时，对页面中所有输入进行校验，校验结果显示方式同上。若所有表单校验通过，弹窗显示“提交成功”，否则显示“提交失败”
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>task30</title>
    <style>
        form{
        margin: 100px auto;
        width: 600px;
        }
        input{
        border: 2px solid gainsboro;
        font-size: larger;
        border-radius: 3px;
        width: 300px;
        height: 40px;
        margin-left: 70px;
        box-shadow: black;
        }
        #confirmPassword{
            margin-left: 30px;
        }
        label{
        font-weight: bolder;
        font-size: 20px;
        }
        button{
        width: 80px;
        height: 40px;
        border: none;
        background-color:dodgerblue;
        border-radius: 5px;
        font-size: larger;
        margin-left: 20px;
        color: white;
        font-weight: bolder;
        }
        #remind {
        margin-left: 80px;
        }
        .inputError{
            border-color: red;
        }
        .divError{
            color: red;
        }
        .inputRight{
            border-color: green;
        }
        .divRight{
            color: green;
        }
        .inputNormal{

        }
        div{
            color: silver;
            margin-left: 130px;
        }
    </style>
</head>
<body>
    <form>
         <label for="value">名称：</label><input type="text" placeholder="请输入" id="value"><br/>
         <div id="valueRemind"></div><br/>
         <label for="password">密码：</label><input type="text" placeholder="请输入" id="password"><br/>
         <div id="passwordRemind"></div><br/>
         <label for="confirmPassword">密码确认：</label><input type="text" placeholder="请输入" id="confirmPassword"><br/>
         <div id="confirmPasswordRemind"></div><br/>
         <label for="email">邮箱：</label><input type="text" placeholder="请输入" id="email"><br/>
         <div id="emailRemind"></div><br/>
         <label for="tel">手机：</label><input type="text" placeholder="请输入" id="tel"><br/>
         <div id="telRemind"></div><br/>
         <button type="submit">提交</button>
    </form>
    <script>
        
        var $=function (el) {
            return document.querySelector(el);
        };
        $("form").onclick=function (e) {
            if(e.target==$("#value")){
                $("#valueRemind").innerHTML="必填，长度为4~16个字符";
                $("#valueRemind").className="";
                e.target.className="";
                e.target.onblur=function () {
                    verifyName(this.value,$("#valueRemind"),this);
                }
            }else if(e.target==$("#password")){
                $("#passwordRemind").innerHTML="输入6-12纯数字密码";
                $("#passwordRemind").className="";
                e.target.className="";
                e.target.onblur=function () {
                    verifyPassword(this.value,$("#passwordRemind"),this);
                }
            }else if(e.target==$("#confirmPassword")){
                $("#confirmPasswordRemind").innerHTML="密码确认";
                $("#confirmPasswordRemind").className="";
                e.target.className="";
                e.target.onblur=function () {
                    verifyConfirmPassword(this.value,$("#confirmPasswordRemind"),this)
                }

            }else if(e.target==$("#email")){
                $("#emailRemind").innerHTML="输入邮箱";
                $("#emailRemind").className="";
                e.target.className="";
                e.target.onblur=function () {
                    verifyEmail(this.value,$("#emailRemind"),this);
                }
            }else if(e.target==$("#tel")){
                $("#telRemind").innerHTML="输入11位手机号";
                $("#telRemind").className="";
                e.target.className="";
                e.target.onblur=function () {
                    verifyTel(this.value,$("#telRemind"),this);
                }
            }
        };
        function verifyEmail(value,remind,input) {
            var myRe=/[0-9a-zA-Z]+@[0-9a-z]{2,3}.com/;
            if(value==""){
                remind.innerHTML="邮箱不能为空";
                remind.className="divError";
                input.className="inputError";
                return false;
            }else{
                if(myRe.test(value)){
                    remind.innerHTML="邮箱格式正确";
                    remind.className="divRight";
                    input.className="inputRight";
                    return true;
                }else{
                    remind.innerHTML="邮箱格式错误";
                    remind.className="divError";
                    input.className="inputError";
                    return false;
                }
            }

        }
        function verifyTel(value,remind,input) {
            if(value==""){
                remind.innerHTML="手机号不能为空";
                remind.className="divError";
                input.className="inputError";
                return false;
            }else{
                if(/[0-9]{11}/.test(value)&&value.length==11){
                    remind.innerHTML="手机号格式正确";
                    remind.className="divRight";
                    input.className="inputRight";
                    return true;
                }else {
                    remind.innerHTML="手机号格式错误";
                    remind.className="divError";
                    input.className="inputError";
                    return false;
                }
            }
        }
        function verifyConfirmPassword(value,remind,input) {
            if(value==""){
                remind.innerHTML="密码不能为空";
                remind.className="divError";
                input.className="inputError";
                return false;
            }else{
                if(value!==$("#password").value){
                    remind.innerHTML="密码输入不一致";
                    remind.className="divError";
                    input.className="inputError";
                    return false;
                }else{
                    remind.innerHTML="密码输入一致";
                    remind.className="divRight";
                    input.className="inputRight";
                    return true;
                }
            }
        }
        function verifyPassword(value,remind,input) {
            if(value==""){
                remind.innerHTML="密码不能为空";
                remind.className="divError";
                input.className="inputError";
                return false;
            }else{
                if(/[0-9]{6,12}/.test(value)){
                    remind.innerHTML="密码格式正确";
                    remind.className="divRight";
                    input.className="inputRight";
                    return true;
                }else{
                    remind.innerHTML="密码格式错误";
                    remind.className="divError";
                    input.className="inputError";
                    return false;
                }
            }
        }
        function verifyName(value,remind,input) {
            if(value==""){
                remind.innerHTML="姓名不能为空";
                remind.className="divError";
                input.className="inputError";
                return false;
            }else{
                if(allNum(value)>=4&&allNum(value)<=16){
                    remind.innerHTML="格式正确";
                    remind.className="divRight";
                    input.className="inputRight";
                    return true;
                }else{
                    remind.innerHTML="格式错误";
                    remind.className="divError";
                    input.className="inputError";
                    return false;
                }
            }
        };
        function allNum(str) {
            var num=0;
            for(var i=0;i<str.length;i++){
                if(str.charCodeAt(i)>=0&&str.charCodeAt(i)<=128){  //ASCLL编码1-128为英文字符
                    num+=1;
                }else {
                    num+=2;
                }
            }
            return num;
        }
        
        $("button").onclick=function () {
            var result1=verifyName($("#value").value,$("#valueRemind"),$("#value"));
            var result2=verifyPassword($("#password").value,$("#passwordRemind"),$("#password"));
            var result3= verifyConfirmPassword($("#confirmPassword").value,$("#confirmPasswordRemind"),$("#confirmPassword"))
            var result4=verifyTel($("#tel").value,$("#telRemind"),$("#tel"));
            var result5=verifyEmail($("#email").value,$("#emailRemind"),$("#email"));
            if(result1&&result2&&result3&&result4&&result5){
                alert("提交成功");
            }else{
                alert("提交失败");
            }
            return false;
        }
    </script>
</body>
</html>